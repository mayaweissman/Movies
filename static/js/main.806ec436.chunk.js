(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{51:function(e,t,s){},53:function(e,t,s){},72:function(e,t,s){},74:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},84:function(e,t,s){"use strict";s.r(t);var a,i=s(0),o=s.n(i),n=s(22),r=s.n(n),c=(s(51),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,96)).then((function(t){var s=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,n=t.getTTFB;s(e),a(e),i(e),o(e),n(e)}))}),p=s(5),l=s(11),h=s(13),u=s(12),v=s(45),d=s(3),m=s(16),j=s.n(m),b=s(23),O=(s(53),s(18)),x=s.n(O),g=s(17),f=s.n(g),y=function e(t,s,a,i,o){Object(p.a)(this,e),this.Poster=t,this.Title=s,this.Type=a,this.Year=i,this.imdbID=o},S=(s(72),s(25));!function(e){e[e.addMovieToUsersMovies=0]="addMovieToUsersMovies",e[e.removeMovieFromUsersMovies=1]="removeMovieFromUsersMovies",e[e.getMovies=2]="getMovies",e[e.changeDisplayForPopUp=3]="changeDisplayForPopUp"}(a||(a={}));var N=s(27),M=Object(N.b)((function(e,t){var s=Object(S.a)({},e);switch(t.type){case a.addMovieToUsersMovies:s.usersMovies.push(t.payLoad);break;case a.getMovies:s.moviesToDisplay=t.payLoad;break;case a.removeMovieFromUsersMovies:var i=s.usersMovies.findIndex((function(e){return e.imdbID===t.payLoad}));s.usersMovies.splice(i,1);break;case a.changeDisplayForPopUp:s.displayPopUp?s.displayPopUp=!1:s.displayPopUp=!0}return s}),new function e(){Object(p.a)(this,e),this.usersMovies=[],this.displayPopUp=!1,this.moviesToDisplay=[];var t=sessionStorage.getItem("AppState");if(t){var s=JSON.parse(t);this.usersMovies=s.usersMovies}},Object(N.a)((function(e){return function(t){return function(s){t(s),sessionStorage.setItem("AppState",JSON.stringify(e.getState()))}}}))),U=(s(74),s(43)),P=s.n(U),w=s(44),k=s.n(w),D=s(42),T=s.n(D),F=s(1),L=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(p.a)(this,s),(a=t.call(this,e)).state={plot:{short:"",full:""},plotDisplay:"short",showLoader:!1},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=Object(b.a)(j.a.mark((function e(){var t,s,a,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({showLoader:!0}),e.next=4,x.a.get("http://www.omdbapi.com/?apikey=99890933&i=".concat(this.props.movie.imdbID));case 4:return t=e.sent,e.next=7,x.a.get("http://www.omdbapi.com/?apikey=99890933&i=".concat(this.props.movie.imdbID,"&plot=full"));case 7:s=e.sent,a=s.data.Plot,i=t.data.Plot,(o=Object(S.a)({},this.state.plot)).short=i,o.full=a,this.setState({plot:o}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0.message);case 19:return e.prev=19,this.setState({showLoader:!1}),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[0,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(F.jsx)("div",{className:"pop-up",children:Object(F.jsxs)("div",{className:"inside-pop-up",children:[Object(F.jsx)("button",{className:"close-btn",onClick:function(){return M.dispatch({type:a.changeDisplayForPopUp})},children:Object(F.jsx)(T.a,{})}),Object(F.jsxs)("div",{className:"movie-info",children:[Object(F.jsxs)("div",{className:"movie-main-info",children:[Object(F.jsx)("span",{className:"movie-title",children:this.props.movie.Title}),Object(F.jsx)("span",{className:"movie-year",children:this.props.movie.Year})]}),"N/A"!==this.props.movie.Poster&&Object(F.jsx)("img",{src:this.props.movie.Poster}),"N/A"===this.props.movie.Poster&&Object(F.jsx)("div",{className:"no-img",children:"No img to movie"})]}),Object(F.jsxs)("div",{className:"plot-area",children:[this.state.showLoader&&Object(F.jsx)("img",{src:"./assets/images/horizontal-lodaer.gif",className:"plot-loader"}),Object(F.jsx)("div",{className:"plot",children:"short"===this.state.plotDisplay?this.state.plot.short:this.state.plot.full}),Object(F.jsx)("button",{onClick:"short"===this.state.plotDisplay?function(){return e.setState({plotDisplay:"full"})}:function(){return e.setState({plotDisplay:"short"})},children:"short"===this.state.plotDisplay?Object(F.jsxs)(F.Fragment,{children:["Full plot ",Object(F.jsx)(P.a,{})," "]}):Object(F.jsxs)(F.Fragment,{children:["Short plot ",Object(F.jsx)(k.a,{})," "]})})]})]})})}}]),s}(i.Component),I=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(p.a)(this,s),(i=t.call(this,e)).unsubscribeStore=void 0,i.openPopUp=function(e){return function(t){i.setState({movieToPopUp:e}),M.dispatch({type:a.changeDisplayForPopUp})}},i.isOnFavorites=function(e){return!!M.getState().usersMovies.find((function(t){return t.imdbID===e.imdbID}))},i.handleToggleForMovieOnUsersList=function(e){return function(t){t.stopPropagation(),i.isOnFavorites(e)?M.dispatch({type:a.removeMovieFromUsersMovies,payLoad:e.imdbID}):M.dispatch({type:a.addMovieToUsersMovies,payLoad:e})}},i.state={displayPopUp:M.getState().displayPopUp,movies:M.getState().moviesToDisplay,movieToPopUp:new y},i.unsubscribeStore=M.subscribe((function(){var e=M.getState().displayPopUp,t=M.getState().moviesToDisplay;i.setState({displayPopUp:e}),i.setState({movies:t})})),i}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeStore=M.subscribe((function(){var t=M.getState().displayPopUp,s=M.getState().moviesToDisplay;e.setState({displayPopUp:t}),e.setState({movies:s})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribeStore()}},{key:"render",value:function(){var e=this;return Object(F.jsxs)("div",{className:"movies",children:[!this.props.text&&Object(F.jsx)("div",{className:"movies-container",children:this.state.movies.map((function(t){return Object(F.jsxs)("div",{className:"movie",onClick:e.openPopUp(t),children:["N/A"!==t.Poster&&Object(F.jsx)("img",{src:t.Poster}),"N/A"===t.Poster&&Object(F.jsx)("div",{className:"no-img",children:"No img to movie"}),Object(F.jsx)("div",{className:"title-area",children:Object(F.jsx)("span",{className:"movie-title",children:t.Title})}),Object(F.jsx)("span",{className:"movie-year",children:t.Year}),Object(F.jsx)("button",{onClick:e.handleToggleForMovieOnUsersList(t),children:e.isOnFavorites(t)?Object(F.jsxs)(F.Fragment,{children:["Remove from favorites ",Object(F.jsx)(f.a,{})]}):Object(F.jsxs)(F.Fragment,{children:["Add to favorites ",Object(F.jsx)(f.a,{})]})})]},t.imdbID)}))}),Object(F.jsx)("span",{className:"no-movies-txt",children:this.props.text&&this.props.text}),this.state.displayPopUp&&Object(F.jsx)(L,{movie:this.state.movieToPopUp})]})}}]),s}(i.Component),C=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(p.a)(this,s),(i=t.call(this,e)).searchMovies=function(){var e=Object(b.a)(j.a.mark((function e(t){var s,o,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i.setState({showLoader:!0}),!(s=t.target.value)){e.next=12;break}return i.setState({isUserStartTyping:!0}),e.next=7,x.a.get("http://www.omdbapi.com/?apikey=99890933&s=".concat(s,"&page="));case 7:o=e.sent,"False"===(n=o.data).Response?i.setState({textOnNoMovies:n.Error}):(r=n.Search,i.setState({textOnNoMovies:""}),M.dispatch({type:a.getMovies,payLoad:r})),e.next=15;break;case 12:i.setState({isUserStartTyping:!1}),i.setState({textOnNoMovies:""}),M.dispatch({type:a.getMovies,payLoad:[]});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0.message);case 20:return e.prev=20,i.setState({showLoader:!1}),t.target.value||i.setState({textOnNoMovies:""}),e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[0,17,20,24]])})));return function(t){return e.apply(this,arguments)}}(),i.displayUsersMovies=function(){i.setState({isUserStartTyping:!0});var e=M.getState().usersMovies;M.dispatch({type:a.getMovies,payLoad:e}),e.length>0?i.setState({textOnNoMovies:""}):i.setState({textOnNoMovies:"No favorites movies selected"})},i.state={username:"",isUserStartTyping:!1,showLoader:!1,textOnNoMovies:"",screenWidth:0},i}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=sessionStorage.getItem("username");e?this.setState({username:e}):this.props.history.push("/login"),M.getState().moviesToDisplay.length>0&&(this.setState({isUserStartTyping:!0}),this.setState({textOnNoMovies:""})),this.setState({screenWidth:window.screen.width})}},{key:"render",value:function(){return Object(F.jsxs)("div",{className:"home",children:[Object(F.jsxs)("header",{children:[Object(F.jsxs)("span",{className:"username",children:["Hello ",this.state.username,"!"]}),Object(F.jsx)("input",{placeholder:"Search movies",className:this.state.isUserStartTyping?"active":"",onInput:this.searchMovies}),Object(F.jsxs)("button",{onClick:this.displayUsersMovies,children:[" ",this.state.screenWidth>700&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(f.a,{}),"My movies"]}),this.state.screenWidth<700&&Object(F.jsx)(f.a,{fontSize:"large"})]})]}),Object(F.jsxs)("main",{children:[this.state.showLoader&&Object(F.jsx)("img",{src:"./assets/images/loader.gif"}),!this.state.showLoader&&Object(F.jsx)(I,{text:this.state.textOnNoMovies})]})]})}}]),s}(i.Component),A=(s(80),function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(p.a)(this,s),(a=t.call(this,e)).setNameLocally=function(e){var t=e.target.value,s=" ";t?t.length<2&&(s="Name muse include at least 2 characters"):s="Please enter your name",a.setState({error:s}),a.setState({name:t})},a.saveNameOnSessionStorgae=function(){" "===a.state.error?(sessionStorage.setItem("username",a.state.name),a.props.history.push("/movies")):a.setState({error:"Please enter your name"})},a.state={name:"",error:""},a}return Object(l.a)(s,[{key:"render",value:function(){return Object(F.jsx)("div",{className:"login",children:Object(F.jsxs)("div",{className:"login-contanier",children:[Object(F.jsx)("h1",{children:"Login"}),Object(F.jsxs)("div",{className:"name-area",children:[Object(F.jsx)("input",{onInput:this.setNameLocally,className:"name-box",placeholder:"Enter your name"}),Object(F.jsx)("span",{className:"err",children:this.state.error})]}),Object(F.jsx)("button",{onClick:this.saveNameOnSessionStorgae,children:"Login"})]})})}}]),s}(i.Component)),W=(s(81),function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(p.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(F.jsx)("div",{className:"layout",children:Object(F.jsx)(v.a,{children:Object(F.jsxs)(d.d,{children:[Object(F.jsx)(d.b,{path:"/login",component:A,exact:!0}),Object(F.jsx)(d.b,{path:"/movies",component:C,exact:!0}),Object(F.jsx)(d.a,{from:"/",to:"/movies"})]})})})}}]),s}(i.Component));r.a.render(Object(F.jsx)(o.a.StrictMode,{children:Object(F.jsx)(W,{})}),document.getElementById("root")),c()}},[[84,1,2]]]);
//# sourceMappingURL=main.806ec436.chunk.js.map